---
title: "04. 데이터 전처리"
tags:
  - AICE 자격증 공부
---
# 데이터 전처리
> 수집한 데이터를 데이터 분석/AI 모델링을 위하여 데이터를 정제하고 다듬는 작업

***
## 데이터 탐색 방법

1. 데이터 확인하기
2. 필요한 칼럼만 추출
3. 데이터 타입 변경

***
### 1. 데이터 확인하기
info, head, tail, describe 함수로 데이터 탐색
 
#### 1. Sample 데이터 확인
   - head(), tail()

#### 2. 통계적 특성 확인
   - descirbe() : 유효데이터수, 값평균, 표준편차, 최소값, 1사분위값~3사분위값, 최대값

#### Table 정보 확인
   - info() : 인덱스 범위, Column 이름, 데이터 타입, null 값 등 확인 가능

***
### 2. 필요한 칼럼만 추출
데이터 확인하기에서 불필요하다고 판단된 칼럼은 해당 방법으로 추출한다.

```Python3
DF=data[["school_class", "gender_type", "item_count"]] #1
DF=DF.rename(columns = {"school_class" : 'class', "gender_type" : 'gender', "item_count" : 'count'}) #2
```

1. [[]]로 필요한 칼럼만 작성하여 DataFrame 형태로 추출 및 생성
2. rename(columns = {"기존칼럼" : '새로운칼럼'}) 형태로 함수 사용하여 복잡한 이름의 칼럼 간단하게 변경

***

### 3. 데이터 타입 변경
숫자형 데이터가 object로 있어 사칙연산이 이뤄지지 않는다.

```Python3
DF = DF.replace("_", numpy.NaN) #1
DF = DF.astype({'column':float}) #2
```

1. replace 함수로 항목값 치환, NaN값으로 변경 가능
2. 특정 column의 type 변경. NaN은 int type을 지원하지 않아 float type으로 변경한다.

***
## 결측치 처리하기
결측치는 데이터를 분석하는 데에 있어서 반드시 처리해야 하는 값이다. 참고로 0은 결측치가 아니다. 이때 막대한 데이터가 손실될 수 있거나, 단순대체를 하면 데이터에 편향이 생길 확률이 높아진다.

데이터 결측치 처리시 원본 데이터를 COPY해서 사용한다.<br>
copy하지 않을 경우 기존 데이터 정보도 변경된다.<br>

> (datafram명.copy() 함수)

***

### 채우기
결측치를 정보 손실없이 빠르게 채울 수 있지만 모든 결측치가 같은 값을 가질 수 있다.

```Python3
#결측치를 뒤에 있는 data 값을 사용해서 채운다.
DataFrame명.fillna(method='backfill')
DataFrame명.tail()

#결측치를 앞에 있는 data 값을 사용해서 채운다.
DataFrame명.fillna(method='ffill')
DataFrame명.head()

#replace()함수로 결측치를 채운다. 이때 copy 사용
DataFrame명['age'].replace(numpy.nan, DataFrame명['age'].median())
```

#### 1. 값 대체하기
- 결측치를 평균화 값으로 대체한다.
- 주로 평균, 중앙값, 최빈값 사용

#### 2. 예측하기
- 결측치를 상관관계나 예측모델을 사용하여 채운다.

```Python3
DataFrame명.interpolate() #결측치를 같은 간격으로 채운다
```

***

### 제거하기
#### 1. Listwise

```Python3
DataFrame명.dropna()
```

- 1개의 값이라도 결측치로 존재하는 전체 행 삭제
- 결측치가 존재하는 특정 데이터를 삭제하여 결측치 제거
- 최대치의 정보 손실 발생

#### 2. Pairwise

```Python3
DataFrame명.dropna(how='all')
```

- 결측치로 존재하는 변수만 삭제
- 모든 변수가 결측치인 경우 해당행을 삭제하고 결측값이 있는 변수는 무시된다.
- 매번 샘플이 달라 분석을 비교할 수 없다.

```Python3
DataFrame명.dropna(thresh=10) # NA이 아닌 값이 10개 이상인 경우만 남긴다.
DataFrame명.dropna(subset=['column명']) # 특정 열에 있는 NA만 참고하여 결측치 제거
```

***
## 이상치 처리하기
